

@addTagHelper "*, Microsoft.AspNetCore.Mvc.TagHelpers"
@{
    ViewData["Title"] = "Invoice";
}

@{
    foreach (var name in ViewBag.InvoicesList)
    {
        <h1> Invoices for @name.Customer.FirstName</h1>
    }
}

<form method="post" asp-controller="Invoice" asp-action="index">
    <div><select name="customer" id="customer" asp-items="@ViewBag.Customers as List<SelectListItem>"></select> <button type="submit"> Show invoices</button></div>
</form>



<table>
    <tr>
        <th>Customer</th>
        <th>Product</th>
        <th>Price</th>
    </tr>
    @foreach (var invoice in ViewBag.InvoicesList)
    {
        <tr>
            <td>@invoice.Customer.FirstName @invoice.Customer.LastName</td>
            <td></td>
            <td></td>
        </tr>

        @foreach (var orderItem in invoice.Orderitems)
        {

            <tr>
                <td></td>
                <td> @orderItem.Product.Title</td>
                <td> @orderItem.Product.Price</td>
            </tr>

        }



        <tr>

            <td style="background-color:#dddddd;"></td>
            <td style="background-color:#dddddd;"><b>Total</b></td>
            <td style="background-color: #dddddd;">@invoice.TotalPrice</td>
        </tr>

    }
</table>




